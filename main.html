<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css">
  <title>Az ítélet labirintusa</title>
</head>
<body>
  <!-- Videó háttér -->
  <video id="bg" autoplay muted loop playsinline poster="kepekvideok/background.jpg">
    <source src="kepekvideok/2297636-uhd_3840_2160_30fps.mp4" type="video/mp4">
  </video>

  <!-- Tartalom -->
  <div class="main">
    <h1 id="flame">Az ítélet labirintusa</h1>

    <div class="menu">
      <button type="button" onclick="loadGame()" class="menu_button" id="kezdes_button">Játék kezdése</button>
      <!-- <button type="button" onclick="loadInstructions()" class="menu_button">Folytatás</button> -->
      <button type="button" onclick="loadInstructions()" class="menu_button" id="utmutato_button">Útmutató</button>
      <button type="button" onclick="loadSettings()" class="menu_button" id="beallitas_button">Beállítások</button>
      <button type="button" onclick="loadCreators()" class="menu_button" id="keszitok_button">Készítők</button>
      <button type="button" onclick="closeProgram()" class="menu_button">Bezárás</button>
    </div>
  </div>

  <script>
    // Flame effect
    const flameText = document.getElementById("flame");
    const glowStates = [
      "0 0 10px rgb(255, 255, 138), 0 0 20px rgb(255, 255, 138)",
      "0 0 20px rgb(255, 255, 80), 0 0 40px rgb(255, 255, 80), 0 0 80px rgb(255, 200, 50)"
    ];
    let i = 0;
    setInterval(() => {
      flameText.style.textShadow = glowStates[i];
      i = (i + 1) % glowStates.length;
    }, 500);

    // loadGame
    const kezdesButton = document.getElementById("kezdes_button");
    kezdesButton.addEventListener("click", function(){
       window.location.href = "game.html"
    });

    // loadGuide
    const utmutatoButton = document.getElementById("utmutato_button");
    utmutatoButton.addEventListener("click", function(){
       window.location.href = "utmutato.html"
    });

    // loadSettings
    const beallitasButton = document.getElementById("beallitas_button");
    beallitasButton.addEventListener("click", function(){
       window.location.href = "beallitas.html"
    });

    // loadCreators
    const keszitokButton = document.getElementById("keszitok_button")
    keszitokButton.addEventListener("click", function(){
       window.location.href = "creators.html"
    });

    // background video lassítás
    const vid = document.getElementById('bg');
    vid.addEventListener('loadedmetadata', () => {
      vid.playbackRate = 0.7; // lassítás
    });

    // closeProgram
    function closeProgram() {
    // Próbálkozik a bezárással
    window.open('', '_self');
    window.close();

    // Ha nem sikerül (általában nem engedi)
    setTimeout(() => {
        // átdob egy "Kilépés" oldalra vagy a főmenübe
        window.location.href = "main.html";
        window.alert("Nem sikerült bezárni az oldalt. Visszairányítunk a főmenübe.");
    }, 600);
    }
  </script>
          
                
            <script> // A konzol logokat majd nyugodtan törölhetitek, csak csináltam h átlássátok, nem tudom a folyamatot hogyan akarjuk megjeleníteni
// Kezdő statok
let ugyesseg = Math.floor(Math.random() * 6) + 7;
console.log("Saját ügyesség: " + ugyesseg);
let kezdetiugyesseg = ugyesseg;

let eletero = Math.floor(Math.random() * 6) + 13;
console.log("Saját élető: " + eletero);
let kezdetieletero = eletero;


let szerencse = Math.floor(Math.random() * 6) + 7;
console.log("Saját szerencse: " + szerencse);
let kezdetiszerencse = szerencse;

console.log("----------------");


// Italok definíciója
const italok = [
    {
        nev: "Ügyesség Itala",
        leiras: "Visszaállítja ÜGYESSÉG pontjaidat a kezdeti értékre.",
        hatas: () => { 
            ugyesseg = kezdetiugyesseg 
            console.log(`Ügyesség: ${ugyesseg}`);
        },
        hasznalatok: 0
    },
    {
        nev: "Életerő Itala",
        leiras: "Visszaállítja ÉLETERŐ pontjaidat a kezdeti értékre.",
        hatas: () => { 
            let eletero = kezdetieletero
            console.log(`Életerőd: ${eletero}`);
         },
        hasznalatok: 0
    },
    {
        nev: "Szerencse Itala",
        leiras: "Visszaállítja SZERENCSE pontjaidat a kezdeti értékre, és 1-el megnöveli Kezdeti SZERENCSÉDET.",
        hatas: () => {
            kezdetiSzerencse += 1;
            szerencse = kezdetiSzerencse;
            console.log(`Szerencséd: ${szerencse}`);
        },
        hasznalatok: 0
    }
];

// Ital választása

let valasztottItal = null;

function italValasztas() {
    console.log("\nVálassz egy italt (1-3):");
    italok.forEach((ital, index) => {
        console.log(`${index + 1}. ${ital.nev} - ${ital.leiras}`);
    });

    const valasztas = parseInt(prompt("Add meg az ital számát: ")) - 1;
    if (valasztas >= 0 && valasztas < italok.length) {
        valasztottItal = italok[valasztas];
        console.log(`\nKiválasztottad: ${valasztottItal.nev}`);
    } else {
        console.log("Érvénytelen választás!");
    }
}

// Ital használata
function italHasznalat() {
    if (valasztottItal.hasznalatok >= 2) {
        console.log("Már már ittál at italból, nincs több adag!");
        return;
    }

    valasztottItal.hatas();
    valasztottItal.hasznalatok += 1;
    console.log(`\nFelhajtottad a ${valasztottItal.nev}-t!`);
    console.log(`Új értékeid:`);
    console.log(`Ügyesség: ${ugyesseg}`);
    console.log(`Életerő: ${eletero}`);
    console.log(`Szerencse: ${szerencse}`);
    console.log(`Hátra lévő adagok: ${2 - valasztottItal.hasznalatok}`);
}

//italValasztas();               
        //EZ A LEGELEJÉRE

//italHasznalat();
        //minden egyes forduló után felajánlani (???)

// Ellenfél statok
let ellenfeleletero = 10;
let ellenfelugyesseg = 10;

// Szerencsepróba
function szerencseProba() {
    let probaszerencsekocka = Math.floor(Math.random() * 6) + 1 + Math.floor(Math.random() * 6) + 1;
    if (probaszerencsekocka <= szerencse) {
        szerencse -= 1;
        console.log("Sikeres szerencsepróba"); 
        return true; 
    } else {
        console.log("Sikertelen szerencsepróba");
        return false;
    }
}

let probalsze = false // MÉG NINCS AKTIVÁLÁSRA GOMB

// HARC
while (eletero > 0 && ellenfeleletero > 0) {
    //támadóerő meghatározás
    let ellenfeltamadoero = ellenfelugyesseg + Math.floor(Math.random() * 6) + 1 + Math.floor(Math.random() * 6) + 1;
    let tamadoero = ugyesseg + Math.floor(Math.random() * 6) + 1 + Math.floor(Math.random() * 6) + 1;

    console.log("Te támadóerejed: " + tamadoero);
    console.log("Ellenfél támadóereje: " + ellenfeltamadoero);

    // támadóerők összehasonlítás
    if (tamadoero > ellenfeltamadoero) {
        console.log("Te sebzted meg az ellenfelet!");
        ellenfeleletero -= 2;
        console.log("Ellenfél életerő: " + ellenfeleletero);

        
        if (probalsze) //ha szerencsét próbálsz h többet sebezz
        {
            if (szerencseProba()) {
                console.log("Extra sebzés!");
                ellenfeleletero -= 2;
                console.log("Ellenfél életerő: " + ellenfeleletero);
                probalsze = false
            }

            else {
                console.log("karcoltal csak az ellenfélen!");
                ellenfeleletero += 1;
                probalsze = false
            }
        }
    }

     else if (ellenfeltamadoero > tamadoero) 
     {
        console.log("Az ellenfél sebzett meg téged!");
        eletero -= 2;
        console.log("Saját életerő: " + eletero);

            if (probalsze) //ha szerencsét próbálsz h kevesebbet sebezzen
            {
             if (szerencseProba())
              {
                    console.log("Csökkentett sebzés!");
                    eletero += 1;
                    console.log("Saját életerő: " + eletero);

                    probalsze = false
                }
                
             else{
                    console.log("balszerencse, még 1 sebzés!");
                    eletero -= 1;
                    console.log("Saját életerő: " + eletero);
                    probalsze = false
                        
                }
            }
    }
    else {
        console.log("Kivédtétek egymás csapását következő forduló");
    }

    console.log("------- Következő forduló ---------");
}
                                        
if (eletero <= 0) {
    console.log("Vesztettél, az ellenfél legyőzött!");
} else {
    console.log("Győztél, az ellenfél legyőzve!");
}
            </script>
        </div>
        
    </div>
</body>
</html>